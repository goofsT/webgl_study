### é¢œè‰²

GLSL ä¸­å‘é‡ç±»å‹çš„å¦ä¸€ä¸ªé‡è¦ç‰¹æ€§æ˜¯ï¼Œå±æ€§å¯ä»¥æŒ‰ä»»æ„é¡ºåºç»„åˆï¼Œè¿™ä½¿å¾—å€¼è½¬æ¢å’Œæ··åˆå˜å¾—å®¹æ˜“ã€‚

```glsl
vec3 yellow, magenta, green;

vec4 vector;
vector[0] = vector.r = vector.x = vector.s;
vector[1] = vector.g = vector.y = vector.t;
vector[2] = vector.b = vector.z = vector.p;
vector[3] = vector.a = vector.w = vector.q;

yellow.rg = vec2(1.0); //çº¢è‰²ã€ç»¿è‰²é€šé“æ”¹ä¸º1
yellow[2] = 0.0; //è“è‰²é€šé“æ”¹ä¸º0
```

### æ··åˆé¢œè‰²
mix()
>æ··åˆä¸¤ä¸ªç™¾åˆ†æ¯”å€¼  0.0 åˆ° 1.0 ä¹‹é—´çš„å€¼  æ˜¯çº¿æ€§æ’å€¼

ç¤ºä¾‹ï¼šä½¿ç”¨æ­£å¼¦æ³¢éšæ—¶é—´å˜åŒ–çš„ç»å¯¹å€¼æ¥æ··åˆcolorAå’ŒcolorBã€‚
```glsl
uniform vec2 u_resolution;
uniform float u_time;
vec3 colorA = vec3(0.149,0.141,0.912);
vec3 colorB = vec3(1.000,0.833,0.224);

void main() {
    vec3 color = vec3(0.0);

    float pct = abs(sin(u_time));//å¢åŠ å˜åŒ–é¢‘ç‡ï¼šu_time*x

    //mix(a, b, 0.0) = a    å…¨æ˜¯ a
    //mix(a, b, 1.0) = b    å…¨æ˜¯ b
    //mix(a, b, 0.5) = (a + b) / 2   ä¸­é—´
    color = mix(colorA, colorB, pct);

    gl_FragColor = vec4(color,1.0);
}

```

æ€æ ·ä¿è¯ä¸¤ä¸ªè‰²ç›¸å·®æœ€å¤§ï¼Ÿ
>HSV ç©ºé—´ä¸­çš„ Hï¼ˆè‰²ç›¸ï¼‰è§’åº¦è·¨åº¦è¶Šå¤§ï¼Œmix ç”Ÿæˆçš„ä¸­é—´é¢œè‰²å°±è¶Šä¸°å¯Œ
- çº¢ï¼ˆ0Â°ï¼‰â†’ ç»¿ï¼ˆ120Â°ï¼‰ â†’ ä¹‹é—´åŒ…å«é»„æ©™ç­‰ä¸°å¯Œä¸­é—´è‰²
- çº¢ï¼ˆ0Â°ï¼‰â†’ é’ï¼ˆ180Â°ï¼‰ â†’ ä¸­é—´ä¼šå‘ç°ï¼Œé¢œè‰²æ–­å´–å¼å˜åŒ–

æ‰€ä»¥ï¼šçº¢ â†” é»„ã€è“ â†” ç´«ã€ç»¿ â†” é’ æ˜¯ä¸­é—´æœ€ä¸°å¯Œçš„ç»„åˆ,å¯ä»¥æŠŠé¢œè‰²è½¬ä¸º HSV ç©ºé—´ï¼Œé€‰å®šè‰²ç›¸è·¨åº¦å¤§ + ä¿æŒé¥±å’Œåº¦ & æ˜åº¦ä¸€è‡´ï¼Œç„¶åå†è½¬å› RGB è¿›è¡Œ mixã€‚




```glsl
#define PI 3.14159265359
uniform vec2 u_resolution;
uniform vec2 u_mouse;
uniform float u_time;

vec3 colorA = vec3(0.149,0.141,0.912);
vec3 colorB = vec3(1.000,0.833,0.224);

float plot (vec2 st, float pct){
  return  smoothstep( pct-0.01, pct, st.y) -
          smoothstep( pct, pct+0.01, st.y);
}

void main() {
    vec2 st = gl_FragCoord.xy/u_resolution.xy;
    vec3 color = vec3(0.0);

    vec3 pct = vec3(st.x);

    // pct.r = smoothstep(0.0,1.0, st.x);
    // pct.g = sin(st.x*PI);
    // pct.b = pow(st.x,0.5);

    color = mix(colorA, colorB, pct);

    // Plot transition lines for each channel
    color = mix(color,vec3(1.0,0.0,0.0),plot(st,pct.r));
    color = mix(color,vec3(0.0,1.0,0.0),plot(st,pct.g));
    color = mix(color,vec3(0.0,0.0,1.0),plot(st,pct.b));

    gl_FragColor = vec4(color,1.0);
}
```


### HSB
HSBä»£è¡¨è‰²ç›¸ (Hue)ã€é¥±å’Œåº¦ (Saturation) å’Œäº®åº¦ (Brightness)ï¼ˆæˆ–ç§°å€¼ (Value)ï¼‰

>è‰²å½©æ¨¡å‹
- c.x â†’ Hueï¼ˆè‰²ç›¸ï¼‰ï¼ŒèŒƒå›´ [0.0, 1.0]ï¼ŒæŒ‰è§’åº¦ 0Â°ï½360Â° æ˜ å°„ä¸ºé¢œè‰²è½®

- c.y â†’ Saturationï¼ˆé¥±å’Œåº¦ï¼‰ï¼Œ0 ä¸ºç°ï¼Œ1 ä¸ºçº¯è‰²

- c.z â†’ Brightnessï¼ˆäº®åº¦ï¼‰ï¼Œ0 ä¸ºé»‘ï¼Œ1 ä¸ºå…¨äº®

```glsl
#ifdef GL_ES
precision mediump float;
#endif

uniform vec2 u_resolution;
uniform float u_time;

vec3 rgb2hsb( in vec3 c ){
    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
    vec4 p = mix(vec4(c.bg, K.wz),
                 vec4(c.gb, K.xy),
                 step(c.b, c.g));
    vec4 q = mix(vec4(p.xyw, c.r),
                 vec4(c.r, p.yzx),
                 step(p.x, c.r));
    float d = q.x - min(q.w, q.y);
    float e = 1.0e-10;
    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)),
                d / (q.x + e),
                q.x);
}


//hsb2rgbï¼ˆHue/Saturation/Brightness â†’ RGBï¼‰è½¬æ¢çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚å®ƒçš„æ€è·¯æ˜¯ç”¨æ•°å­¦æ„é€ å‡ºä¸€ä¸ª RGB å‘é‡ï¼Œæ¨¡æ‹Ÿè‰²ç›¸ç¯ï¼Œå¹¶è¿›è¡Œæ’å€¼ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªçœŸå® RGB å€¼ã€‚
c.x * 6.0ï¼šå°† hue æ˜ å°„åˆ° 0ï½6 çš„åŒºé—´ï¼ˆå› ä¸ºè‰²è½®åˆ†ä¸º 6 ä¸ªä¸»è‰²æ®µï¼‰
0 â†’ çº¢
1 â†’ é»„
2 â†’ ç»¿
3 â†’ é’
4 â†’ è“
5 â†’ ç´«

+ vec3(0.0, 4.0, 2.0)ï¼šç”¨æ¥é”™ä½ R/G/B ä¸‰ä¸ªé€šé“çš„ç›¸ä½
R çš„ç›¸ä½ä» +0.0
G çš„ç›¸ä½ä» +4.0
B çš„ç›¸ä½ä» +2.0

mod(..., 6.0)ï¼šä¿è¯å€¼æ°¸è¿œåœ¨ [0, 6] åŒºé—´å†…ï¼Œå½¢æˆé—­ç¯ï¼ˆè‰²è½®ï¼‰


-3.0 â†’ abs() â†’ -1.0 â†’ clamp(...)ï¼šæœ€ç»ˆæ„é€ ä¸€ä¸ªä¸‰è§’å½¢æ³¢å½¢ï¼Œå†è£å‰ªèŒƒå›´åˆ° [0, 1]ã€‚è¿™ä¸ªè¿‡ç¨‹æ¨¡æ‹Ÿäº† RGB é€šé“åœ¨è‰²ç›¸è½¬åŠ¨æ—¶å¦‚ä½•åˆ†åˆ«å¢å¼ºæˆ–å‡å¼±ï¼š

| Hue è§’åº¦ï¼ˆxï¼‰ | R | G | B |
| --------- | - | - | - |
| 0         | 1 | 0 | 0 |
| 0.5       | 1 | 1 | 0 |
| 1.0       | 0 | 1 | 0 |
| 1.5       | 0 | 1 | 1 |
| 2.0       | 0 | 0 | 1 |
| 2.5       | 1 | 0 | 1 |
| 3.0       | 1 | 0 | 0 |


vec3 hsb2rgb( in vec3 c ){
    vec3 rgb = clamp(
        abs(
            mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0
        )-1.0,0.0, 1.0 );

    //smoothstep æ’å€¼å‡½æ•°ï¼Œä½œç”¨æ˜¯å¹³æ»‘é¢œè‰²è¾¹ç•Œ,å¯ä»¥è®©æ¸å˜å˜å¾—æŸ”å’Œï¼Œå…¬å¼ï¼šHermiteæ’å€¼å…¬å¼  smooth(x) = x * x * (3 - 2x)  
    rgb = rgb*rgb*(3.0-2.0*rgb);
    
    //æ··åˆç™½è‰²å’Œè‰²ç›¸æ§åˆ¶é¥±å’Œåº¦
    //å½“ c.y = 0ï¼ˆé¥±å’Œåº¦ä¸º 0ï¼‰æ—¶ï¼Œå¾—åˆ°çš„æ˜¯ vec3(1.0)ï¼ˆç™½è‰²ï¼‰
    //å½“ c.y = 1ï¼ˆçº¯è‰²ï¼‰æ—¶ï¼Œå¾—åˆ°çš„æ˜¯ rgb
    //ä¸­é—´å€¼æ˜¯çº¿æ€§æ’å€¼
    return c.z * mix(vec3(1.0), rgb, c.y);
}

void main(){
    vec2 st = gl_FragCoord.xy/u_resolution;
    vec3 color = vec3(0.0);

    // å°†xï¼ˆ0.0 - 1.0ï¼‰æ˜ å°„åˆ°è‰²è°ƒï¼ˆ0.0 - 1.0ï¼‰
    // å°†yï¼ˆ0.0 - 1.0ï¼‰è¡¨ç¤ºä¸ºäº®åº¦
    // 1.0ä¸ºé¥±å’Œåº¦ ä¸å˜
    color = hsb2rgb(vec3(st.x,1.0,st.y));

    gl_FragColor = vec4(color,1.0);
}

```

æ•ˆæœå›¾ï¼š

![å›¾ç‰‡æè¿°](./img/3.png)

### æåæ ‡ä¸­çš„HSB

æåæ ‡å¸¸è§ç”¨é€”
- ğŸŒˆ è‰²ç¯ï¼ˆè‰²ç›¸åœ†ï¼‰	color = hsb2rgb(vec3(angle/PI2, 1.0, radius))
- ğŸŒŠ æ°´æ³¢	sin(radius * N - time)
- ğŸŒª æ‰­æ›²	angle += sin(radius * freq)
- ğŸŒŸ è¾å°„å…‰	æ ¹æ® angle æˆ– radius é˜ˆå€¼åšæ¸å˜

```glsl

#ifdef GL_ES
precision mediump float;
#endif

#define TWO_PI 6.28318530718

uniform vec2 u_resolution;
uniform float u_time;

//in åªè¯»  out åªå†™   inout å¼•ç”¨ä¼ é€’ï¼ˆå¯è¯»å¯å†™ï¼‰
vec3 hsb2rgb( in vec3 c ){
    vec3 rgb = clamp(abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),
                             6.0)-3.0)-1.0,
                     0.0,
                     1.0 );
    rgb = rgb*rgb*(3.0-2.0*rgb);
    return c.z * mix( vec3(1.0), rgb, c.y);
}

void main(){
    vec2 st = gl_FragCoord.xy/u_resolution;
    vec3 color = vec3(0.0);

    // ä½¿ç”¨æåæ ‡ä»£æ›¿ç¬›å¡å°”åæ ‡
    vec2 toCenter = vec2(0.5)-st; //ä»å½“å‰ç‚¹ st æŒ‡å‘ç”»å¸ƒä¸­å¿ƒçš„å‘é‡
    float angle = atan(toCenter.y,toCenter.x);//  åæ­£åˆ‡å‡½æ•°ï¼Œè¿”å›å‘é‡ä¸ x è½´ä¹‹é—´çš„å¤¹è§’ï¼ˆå¼§åº¦åˆ¶ï¼ŒèŒƒå›´ä¸º [-Ï€, Ï€]ï¼‰
    //è®¡ç®—å½“å‰ç‚¹åˆ°ä¸­å¿ƒçš„è·ç¦» âˆš(xÂ² + yÂ²)  
    // * 2.0ï¼šå°† [0, 0.5 * sqrt(2)] æ˜ å°„åˆ° [0, âˆš2] èŒƒå›´ï¼Œå¢å¼ºè§†è§‰èŒƒå›´æˆ–è¦†ç›–æ•´ä¸ªç”»å¸ƒã€‚
    float radius = length(toCenter)*2.0;

    // å°†è§’åº¦ (-PI - PI) æ˜ å°„åˆ°è‰²è°ƒ ( 0 - 1)
    // é¥±å’Œåº¦ä¸åŠå¾„çš„å…³ç³»
    // angle ä¸º [-Ï€, Ï€]  æ‰€ä»¥angle / TWO_PI èŒƒå›´æ˜¯ [-0.5, 0.5]  ç„¶ååŠ 0.5 èŒƒå›´ä¸º[0.0 ,1.0]æ­£å¥½å¯¹åº”è‰²ç›¸H
    // ä½¿ç”¨radiusä½œä¸ºé¥±å’Œåº¦ è¶Šä¸­å¿ƒ é¥±å’Œåº¦ä¸º0 è¶Šè¿œ é¥±å’Œåº¦ä¸º1
    color = hsb2rgb(vec3((angle/TWO_PI)+0.5,radius,1.0));

    gl_FragColor = vec4(color,1.0);
}

```

æ•ˆæœå›¾ï¼š

![å›¾ç‰‡æè¿°](./img/4.png)
